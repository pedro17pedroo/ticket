# ğŸ—ï¸ Diagramas de Arquitetura - TatuTicket

## ğŸ“‹ Ãndice
1. [Arquitetura Geral do Sistema](#arquitetura-geral)
2. [Diagrama de Componentes](#diagrama-componentes)
3. [Fluxo de Dados](#fluxo-dados)
4. [Modelo de Base de Dados](#modelo-bd)
5. [Arquitetura de SeguranÃ§a](#arquitetura-seguranca)
6. [Fluxos de Processo](#fluxos-processo)
7. [Infraestrutura e Deploy](#infraestrutura)

---

## ğŸŒ Arquitetura Geral do Sistema {#arquitetura-geral}

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              TATUTICKET ECOSYSTEM                           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                           FRONTEND LAYER                               â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚   Portal Org    â”‚  â”‚ Portal Cliente  â”‚  â”‚    Desktop Agent        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Dashboard     â”‚  â”‚ â€¢ Autoatendim.  â”‚  â”‚ â€¢ InventÃ¡rio            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Tickets       â”‚  â”‚ â€¢ Meus Tickets  â”‚  â”‚ â€¢ Acesso Remoto         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Kanban        â”‚  â”‚ â€¢ Knowledge     â”‚  â”‚ â€¢ NotificaÃ§Ãµes          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Clientes      â”‚  â”‚ â€¢ HistÃ³rico     â”‚  â”‚ â€¢ SincronizaÃ§Ã£o         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ RelatÃ³rios    â”‚  â”‚                 â”‚  â”‚                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ React + Vite    â”‚  â”‚ React + Vite    â”‚  â”‚ Electron + Node.js      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Port: 5173      â”‚  â”‚ Port: 5174      â”‚  â”‚ Desktop App             â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                       â”‚
â”‚                                      â”‚ HTTP/HTTPS + WebSocket                â”‚
â”‚                                      â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                            API GATEWAY LAYER                           â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚                    Backend API (Node.js)                       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚   REST API  â”‚ â”‚  WebSocket  â”‚ â”‚ File Upload â”‚ â”‚   Auth    â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚           â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ 32+ Endp. â”‚ â”‚ â€¢ Real-time â”‚ â”‚ â€¢ Multer    â”‚ â”‚ â€¢ JWT     â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Express   â”‚ â”‚ â€¢ Socket.io â”‚ â”‚ â€¢ Validationâ”‚ â”‚ â€¢ Passportâ”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Joi Valid.â”‚ â”‚ â€¢ Events    â”‚ â”‚ â€¢ Security  â”‚ â”‚ â€¢ RBAC    â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Middleware  â”‚ â”‚   Logging   â”‚ â”‚  Security   â”‚ â”‚  Modules  â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚           â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Auth      â”‚ â”‚ â€¢ Winston   â”‚ â”‚ â€¢ Helmet    â”‚ â”‚ â€¢ Tickets â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Validationâ”‚ â”‚ â€¢ Audit     â”‚ â”‚ â€¢ Rate Lim. â”‚ â”‚ â€¢ Users   â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Error     â”‚ â”‚ â€¢ Monitoringâ”‚ â”‚ â€¢ CORS      â”‚ â”‚ â€¢ Inventoryâ”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                        Port: 3000                              â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                       â”‚
â”‚                                      â”‚ SQL/NoSQL/Cache                       â”‚
â”‚                                      â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                           DATA LAYER                                   â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚   PostgreSQL    â”‚  â”‚    MongoDB      â”‚  â”‚        Redis            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Dados Princ.  â”‚  â”‚ â€¢ Logs          â”‚  â”‚ â€¢ Cache                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Tickets       â”‚  â”‚ â€¢ Auditoria     â”‚  â”‚ â€¢ SessÃµes               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Users         â”‚  â”‚ â€¢ Monitoring    â”‚  â”‚ â€¢ Rate Limiting         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Organizations â”‚  â”‚ â€¢ Analytics     â”‚  â”‚ â€¢ WebSocket Sessions    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Inventory     â”‚  â”‚                 â”‚  â”‚                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Port: 5432      â”‚  â”‚ Port: 27017     â”‚  â”‚ Port: 6379              â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© Diagrama de Componentes {#diagrama-componentes}

### Backend Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND ARCHITECTURE                     â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    APPLICATION LAYER                       â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚   Routes    â”‚  â”‚ Controllers â”‚  â”‚     Middleware      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ /auth     â”‚  â”‚ â€¢ authCtrl  â”‚  â”‚ â€¢ authenticate      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ /tickets  â”‚  â”‚ â€¢ ticketCtrlâ”‚  â”‚ â€¢ authorize         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ /users    â”‚  â”‚ â€¢ userCtrl  â”‚  â”‚ â€¢ validate          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ /inventoryâ”‚  â”‚ â€¢ invCtrl   â”‚  â”‚ â€¢ errorHandler      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ /upload   â”‚  â”‚ â€¢ uploadCtrlâ”‚  â”‚ â€¢ auditLogger       â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    BUSINESS LAYER                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Services   â”‚  â”‚   Models    â”‚  â”‚     Validators      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ emailSvc  â”‚  â”‚ â€¢ User      â”‚  â”‚ â€¢ authSchema        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ notifSvc  â”‚  â”‚ â€¢ Ticket    â”‚  â”‚ â€¢ ticketSchema      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ auditSvc  â”‚  â”‚ â€¢ Org       â”‚  â”‚ â€¢ userSchema        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ socketSvc â”‚  â”‚ â€¢ Asset     â”‚  â”‚ â€¢ uploadSchema      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ invSvc    â”‚  â”‚ â€¢ Comment   â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     DATA LAYER                             â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ PostgreSQL  â”‚  â”‚  MongoDB    â”‚  â”‚       Redis         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Sequelize â”‚  â”‚ â€¢ Mongoose  â”‚  â”‚ â€¢ ioredis           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Relations â”‚  â”‚ â€¢ Collectionsâ”‚  â”‚ â€¢ Sessions          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Migrationsâ”‚  â”‚ â€¢ Indexes   â”‚  â”‚ â€¢ Cache             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Seeds     â”‚  â”‚ â€¢ Aggreg.   â”‚  â”‚ â€¢ PubSub            â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Frontend Components (Portal OrganizaÃ§Ã£o)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND ARCHITECTURE                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    PRESENTATION LAYER                      â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚    Pages    â”‚  â”‚ Components  â”‚  â”‚       Layout        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Dashboard â”‚  â”‚ â€¢ Header    â”‚  â”‚ â€¢ Sidebar           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Tickets   â”‚  â”‚ â€¢ Sidebar   â”‚  â”‚ â€¢ Main Content      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ TicketDet â”‚  â”‚ â€¢ Modal     â”‚  â”‚ â€¢ Footer            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Kanban    â”‚  â”‚ â€¢ Form      â”‚  â”‚ â€¢ Theme Provider    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Clients   â”‚  â”‚ â€¢ Table     â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    BUSINESS LAYER                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚   Stores    â”‚  â”‚  Services   â”‚  â”‚      Contexts       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ authStore â”‚  â”‚ â€¢ api.js    â”‚  â”‚ â€¢ SocketContext     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ themeStoreâ”‚  â”‚ â€¢ invSvc    â”‚  â”‚ â€¢ NotifContext      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ userStore â”‚  â”‚ â€¢ exportSvc â”‚  â”‚ â€¢ ThemeContext      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚ â€¢ socketSvc â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     UTILS LAYER                            â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚    Utils    â”‚  â”‚   Hooks     â”‚  â”‚      Constants      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ alerts    â”‚  â”‚ â€¢ useAuth   â”‚  â”‚ â€¢ API_ENDPOINTS     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ export    â”‚  â”‚ â€¢ useSocket â”‚  â”‚ â€¢ ROLES             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ format    â”‚  â”‚ â€¢ useNotif  â”‚  â”‚ â€¢ STATUS            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ inventory â”‚  â”‚ â€¢ useTheme  â”‚  â”‚ â€¢ PRIORITIES        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Fluxo de Dados {#fluxo-dados}

### Fluxo de AutenticaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cliente   â”‚    â”‚  Frontend   â”‚    â”‚   Backend   â”‚    â”‚ Base Dados  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚ 1. Login Form    â”‚                  â”‚                  â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                  â”‚
       â”‚                  â”‚ 2. POST /auth/   â”‚                  â”‚
       â”‚                  â”‚    login         â”‚                  â”‚
       â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
       â”‚                  â”‚                  â”‚ 3. Validate      â”‚
       â”‚                  â”‚                  â”‚    Credentials   â”‚
       â”‚                  â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                  â”‚                  â”‚ 4. User Data     â”‚
       â”‚                  â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                  â”‚ 5. JWT Token +   â”‚                  â”‚
       â”‚                  â”‚    User Data     â”‚                  â”‚
       â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
       â”‚ 6. Store Token   â”‚                  â”‚                  â”‚
       â”‚    & Redirect    â”‚                  â”‚                  â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                  â”‚
       â”‚                  â”‚ 7. WebSocket     â”‚                  â”‚
       â”‚                  â”‚    Connect       â”‚                  â”‚
       â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
       â”‚                  â”‚ 8. Real-time     â”‚                  â”‚
       â”‚                  â”‚    Connection    â”‚                  â”‚
       â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
```

### Fluxo de CriaÃ§Ã£o de Ticket

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cliente   â”‚    â”‚  Frontend   â”‚    â”‚   Backend   â”‚    â”‚ Base Dados  â”‚    â”‚   Email     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”‚ 1. New Ticket    â”‚                  â”‚                  â”‚                  â”‚
       â”‚    Form          â”‚                  â”‚                  â”‚                  â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚ 2. POST /tickets â”‚                  â”‚                  â”‚
       â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚ 3. Validate      â”‚                  â”‚
       â”‚                  â”‚                  â”‚    Data          â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚ 4. Save Ticket   â”‚                  â”‚
       â”‚                  â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
       â”‚                  â”‚                  â”‚ 5. Auto-assign   â”‚                  â”‚
       â”‚                  â”‚                  â”‚    Agent         â”‚                  â”‚
       â”‚                  â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
       â”‚                  â”‚                  â”‚ 6. Create Audit  â”‚                  â”‚
       â”‚                  â”‚                  â”‚    Log           â”‚                  â”‚
       â”‚                  â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
       â”‚                  â”‚ 7. Ticket Data   â”‚                  â”‚                  â”‚
       â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                  â”‚
       â”‚ 8. Success       â”‚                  â”‚                  â”‚                  â”‚
       â”‚    Message       â”‚                  â”‚                  â”‚                  â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚ 9. Send Email    â”‚                  â”‚
       â”‚                  â”‚                  â”‚    Notification  â”‚                  â”‚
       â”‚                  â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                  â”‚                  â”‚ 10. WebSocket    â”‚                  â”‚
       â”‚                  â”‚                  â”‚     Broadcast    â”‚                  â”‚
       â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                  â”‚
       â”‚ 11. Real-time    â”‚                  â”‚                  â”‚                  â”‚
       â”‚     Update       â”‚                  â”‚                  â”‚                  â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                  â”‚                  â”‚
```

### Fluxo de InventÃ¡rio (Desktop Agent)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Desktop Agentâ”‚    â”‚   Backend   â”‚    â”‚ Base Dados  â”‚    â”‚  Dashboard  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚ 1. Start Agent   â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚ 2. WebSocket     â”‚                  â”‚                  â”‚
       â”‚    Connect       â”‚                  â”‚                  â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                  â”‚
       â”‚ 3. Authenticate  â”‚                  â”‚                  â”‚
       â”‚    with Token    â”‚                  â”‚                  â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚ 4. Collect       â”‚                  â”‚                  â”‚
       â”‚    System Info   â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚ 5. POST /assets  â”‚                  â”‚                  â”‚
       â”‚    inventory     â”‚                  â”‚                  â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                  â”‚
       â”‚                  â”‚ 6. Save/Update   â”‚                  â”‚
       â”‚                  â”‚    Asset Data    â”‚                  â”‚
       â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
       â”‚                  â”‚ 7. Broadcast     â”‚                  â”‚
       â”‚                  â”‚    Update        â”‚                  â”‚
       â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚ 8. Schedule      â”‚                  â”‚                  â”‚
       â”‚    Next Sync     â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚ ... (repeat every 30 min) ...       â”‚                  â”‚
```

---

## ğŸ—„ï¸ Modelo de Base de Dados {#modelo-bd}

### PostgreSQL - Dados Principais

```sql
-- Diagrama Entidade-Relacionamento Simplificado

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Organizations  â”‚     â”‚      Users      â”‚     â”‚   Departments   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (UUID) PK    â”‚â”€â”€â”€â”€â–ºâ”‚ organizationId  â”‚     â”‚ id (UUID) PK    â”‚
â”‚ name            â”‚     â”‚ id (UUID) PK    â”‚     â”‚ organizationId  â”‚
â”‚ slug            â”‚     â”‚ name            â”‚     â”‚ name            â”‚
â”‚ logo            â”‚     â”‚ email           â”‚     â”‚ description     â”‚
â”‚ primaryColor    â”‚     â”‚ password        â”‚     â”‚ isActive        â”‚
â”‚ secondaryColor  â”‚     â”‚ role            â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ settings        â”‚     â”‚ isActive        â”‚              â”‚
â”‚ createdAt       â”‚     â”‚ lastLogin       â”‚              â”‚
â”‚ updatedAt       â”‚     â”‚ createdAt       â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ updatedAt       â”‚              â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                                 â”‚                       â”‚
                                 â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Categories    â”‚              â”‚              â”‚     Tickets     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (UUID) PK    â”‚              â”‚              â”‚ id (UUID) PK    â”‚
â”‚ organizationId  â”‚              â”‚              â”‚ organizationId  â”‚
â”‚ departmentId    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ departmentId    â”‚
â”‚ name            â”‚              â”‚              â”‚ categoryId      â”‚
â”‚ description     â”‚              â”‚              â”‚ requesterId     â”‚â—„â”€â”€â”
â”‚ color           â”‚              â”‚              â”‚ assigneeId      â”‚â—„â”€â”€â”¤
â”‚ isActive        â”‚              â”‚              â”‚ subject         â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚              â”‚ description     â”‚   â”‚
                                 â”‚              â”‚ status          â”‚   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚              â”‚ priority        â”‚   â”‚
â”‚      SLAs       â”‚              â”‚              â”‚ createdAt       â”‚   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚              â”‚ updatedAt       â”‚   â”‚
â”‚ id (UUID) PK    â”‚              â”‚              â”‚ resolvedAt      â”‚   â”‚
â”‚ organizationId  â”‚              â”‚              â”‚ closedAt        â”‚   â”‚
â”‚ name            â”‚              â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ responseTime    â”‚              â”‚                       â”‚            â”‚
â”‚ resolutionTime  â”‚              â”‚                       â”‚            â”‚
â”‚ isActive        â”‚              â”‚                       â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                       â”‚            â”‚
                                 â”‚                       â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    Comments     â”‚              â”‚              â”‚   Attachments   â”‚   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ id (UUID) PK    â”‚              â”‚              â”‚ id (UUID) PK    â”‚   â”‚
â”‚ ticketId        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ ticketId        â”‚   â”‚
â”‚ userId          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ filename        â”‚   â”‚
â”‚ message         â”‚                             â”‚ originalName    â”‚   â”‚
â”‚ isInternal      â”‚                             â”‚ mimeType        â”‚   â”‚
â”‚ createdAt       â”‚                             â”‚ size            â”‚   â”‚
â”‚ updatedAt       â”‚                             â”‚ path            â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚ uploadedBy      â”‚â—„â”€â”€â”˜
                                                â”‚ createdAt       â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HoursBank     â”‚     â”‚HoursTransaction â”‚     â”‚     Assets      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (UUID) PK    â”‚â”€â”€â”€â”€â–ºâ”‚ hoursBankId     â”‚     â”‚ id (UUID) PK    â”‚
â”‚ organizationId  â”‚     â”‚ id (UUID) PK    â”‚     â”‚ organizationId  â”‚
â”‚ name            â”‚     â”‚ type            â”‚     â”‚ name            â”‚
â”‚ description     â”‚     â”‚ hours           â”‚     â”‚ type            â”‚
â”‚ totalHours      â”‚     â”‚ description     â”‚     â”‚ serialNumber    â”‚
â”‚ usedHours       â”‚     â”‚ userId          â”‚     â”‚ manufacturer    â”‚
â”‚ isActive        â”‚     â”‚ createdAt       â”‚     â”‚ model           â”‚
â”‚ createdAt       â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ location        â”‚
â”‚ updatedAt       â”‚                             â”‚ status          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚ lastSeen        â”‚
                                                â”‚ agentId         â”‚
                                                â”‚ specifications  â”‚
                                                â”‚ createdAt       â”‚
                                                â”‚ updatedAt       â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MongoDB - Logs e Auditoria

```javascript
// Collection: audit_logs
{
  _id: ObjectId("..."),
  userId: "uuid-user-id",
  organizationId: "uuid-org-id",
  action: "CREATE|UPDATE|DELETE|LOGIN|LOGOUT",
  resource: "ticket|user|comment|attachment",
  resourceId: "uuid-resource-id",
  changes: {
    before: { ... },  // Estado anterior
    after: { ... }    // Estado novo
  },
  metadata: {
    ipAddress: "192.168.1.100",
    userAgent: "Mozilla/5.0...",
    sessionId: "session-uuid"
  },
  timestamp: ISODate("2025-10-26T10:30:00Z")
}

// Collection: system_logs
{
  _id: ObjectId("..."),
  level: "info|warn|error|debug",
  message: "Log message",
  service: "api|socket|email|inventory",
  module: "auth|tickets|users",
  data: { ... },
  timestamp: ISODate("2025-10-26T10:30:00Z")
}

// Collection: performance_metrics
{
  _id: ObjectId("..."),
  endpoint: "/api/tickets",
  method: "GET|POST|PUT|DELETE",
  responseTime: 150,  // milliseconds
  statusCode: 200,
  userId: "uuid-user-id",
  timestamp: ISODate("2025-10-26T10:30:00Z")
}
```

### Redis - Cache e SessÃµes

```
// Estrutura de Chaves Redis

// SessÃµes de usuÃ¡rio
user:session:{userId} â†’ {
  token: "jwt-token",
  lastActivity: timestamp,
  ipAddress: "192.168.1.100"
}

// Cache de dados
cache:tickets:{orgId}:{filters} â†’ JSON array
cache:users:{orgId} â†’ JSON array
cache:stats:{orgId}:{period} â†’ JSON object

// Rate limiting
rate_limit:{ip}:{endpoint} â†’ counter (TTL: 15min)

// WebSocket sessions
socket:user:{userId} â†’ socket_id
socket:org:{orgId} â†’ [socket_ids]

// Temporary data
temp:upload:{uploadId} â†’ file_metadata (TTL: 1h)
temp:reset:{token} â†’ user_id (TTL: 30min)
```

---

## ğŸ” Arquitetura de SeguranÃ§a {#arquitetura-seguranca}

### Camadas de SeguranÃ§a

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SECURITY LAYERS                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    NETWORK LAYER                           â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚   Firewall  â”‚  â”‚    HTTPS    â”‚  â”‚      CORS           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Port      â”‚  â”‚ â€¢ TLS 1.3   â”‚  â”‚ â€¢ Origin Control    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Filtering â”‚  â”‚ â€¢ Cert      â”‚  â”‚ â€¢ Method Control    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ IP        â”‚  â”‚   Validationâ”‚  â”‚ â€¢ Header Control    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Whitelist â”‚  â”‚ â€¢ HSTS      â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 APPLICATION LAYER                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚   Helmet    â”‚  â”‚Rate Limitingâ”‚  â”‚   Input Validation  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ XSS       â”‚  â”‚ â€¢ 100 req/  â”‚  â”‚ â€¢ Joi Schemas       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Protectionâ”‚  â”‚   15min     â”‚  â”‚ â€¢ SQL Injection     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ CSRF      â”‚  â”‚ â€¢ Per IP    â”‚  â”‚ â€¢ XSS Prevention    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Clickjack â”‚  â”‚ â€¢ Per User  â”‚  â”‚ â€¢ File Upload       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ MIME Sniffâ”‚  â”‚             â”‚  â”‚   Validation        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                AUTHENTICATION LAYER                        â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚     JWT     â”‚  â”‚   Passport  â”‚  â”‚       RBAC          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ HS256     â”‚  â”‚ â€¢ Local     â”‚  â”‚ â€¢ admin-org         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ 24h TTL   â”‚  â”‚   Strategy  â”‚  â”‚ â€¢ agente            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Refresh   â”‚  â”‚ â€¢ JWT       â”‚  â”‚ â€¢ cliente-org       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Token     â”‚  â”‚   Strategy  â”‚  â”‚ â€¢ Resource Access   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Blacklist â”‚  â”‚             â”‚  â”‚ â€¢ Organization      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚   Isolation         â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     DATA LAYER                             â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  Encryption â”‚  â”‚   Hashing   â”‚  â”‚      Audit          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Bcrypt    â”‚  â”‚ â€¢ Passwords â”‚  â”‚ â€¢ All Actions       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   (12 salt) â”‚  â”‚ â€¢ Sensitive â”‚  â”‚ â€¢ IP Tracking       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ File      â”‚  â”‚   Data      â”‚  â”‚ â€¢ Change History    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Encryptionâ”‚  â”‚ â€¢ SHA-256   â”‚  â”‚ â€¢ Compliance        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ DB        â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Encryptionâ”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Fluxo de AutorizaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Request   â”‚    â”‚    Auth     â”‚    â”‚    RBAC     â”‚    â”‚  Resource   â”‚
â”‚             â”‚    â”‚ Middleware  â”‚    â”‚  Middleware â”‚    â”‚   Access    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚ 1. HTTP Request  â”‚                  â”‚                  â”‚
       â”‚    with Token    â”‚                  â”‚                  â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                  â”‚
       â”‚                  â”‚ 2. Validate JWT  â”‚                  â”‚
       â”‚                  â”‚    Token         â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚ 3. Extract User  â”‚                  â”‚
       â”‚                  â”‚    & Role        â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚ 4. Check Role    â”‚                  â”‚
       â”‚                  â”‚    Permissions   â”‚                  â”‚
       â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
       â”‚                  â”‚                  â”‚ 5. Validate      â”‚
       â”‚                  â”‚                  â”‚    Resource      â”‚
       â”‚                  â”‚                  â”‚    Access        â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚ 6. Check Org     â”‚
       â”‚                  â”‚                  â”‚    Isolation     â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚ 7. Access        â”‚                  â”‚
       â”‚                  â”‚    Granted       â”‚                  â”‚
       â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
       â”‚ 8. Proceed to    â”‚                  â”‚                  â”‚
       â”‚    Controller    â”‚                  â”‚                  â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚                  â”‚
       â”‚                  â”‚                  â”‚ 9. Log Access    â”‚
       â”‚                  â”‚                  â”‚    Attempt       â”‚
       â”‚                  â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
```

---

## ğŸ”„ Fluxos de Processo {#fluxos-processo}

### Processo de GestÃ£o de Tickets

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TICKET LIFECYCLE                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    NOVO     â”‚â”€â”€â”€â–ºâ”‚ EM PROGRESSOâ”‚â”€â”€â”€â–ºâ”‚   AGUARDANDO        â”‚ â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚    CLIENTE          â”‚ â”‚
â”‚  â”‚ â€¢ Criado    â”‚    â”‚ â€¢ AtribuÃ­do â”‚    â”‚                     â”‚ â”‚
â”‚  â”‚ â€¢ Validado  â”‚    â”‚ â€¢ Em anÃ¡liseâ”‚    â”‚ â€¢ Info adicional    â”‚ â”‚
â”‚  â”‚ â€¢ AtribuÃ­do â”‚    â”‚ â€¢ Trabalhandoâ”‚    â”‚ â€¢ AprovaÃ§Ã£o         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â€¢ Teste             â”‚ â”‚
â”‚         â”‚                   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                   â”‚                     â”‚            â”‚
â”‚         â”‚                   â”‚                     â”‚            â”‚
â”‚         â”‚                   â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚         â”‚                   â”‚          â”‚     RESOLVIDO       â”‚ â”‚
â”‚         â”‚                   â”‚          â”‚                     â”‚ â”‚
â”‚         â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ SoluÃ§Ã£o impl.     â”‚ â”‚
â”‚         â”‚                              â”‚ â€¢ Aguarda confirm.  â”‚ â”‚
â”‚         â”‚                              â”‚ â€¢ Teste realizado   â”‚ â”‚
â”‚         â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                         â”‚            â”‚
â”‚         â”‚                                         â”‚            â”‚
â”‚         â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚         â”‚                              â”‚      FECHADO        â”‚ â”‚
â”‚         â”‚                              â”‚                     â”‚ â”‚
â”‚         â”‚                              â”‚ â€¢ Confirmado        â”‚ â”‚
â”‚         â”‚                              â”‚ â€¢ SatisfaÃ§Ã£o        â”‚ â”‚
â”‚         â”‚                              â”‚ â€¢ Arquivado         â”‚ â”‚
â”‚         â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                                      â”‚
â”‚         â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    CANCELADO        â”‚ â”‚
â”‚                                        â”‚                     â”‚ â”‚
â”‚                                        â”‚ â€¢ Duplicado         â”‚ â”‚
â”‚                                        â”‚ â€¢ InvÃ¡lido          â”‚ â”‚
â”‚                                        â”‚ â€¢ NÃ£o aplicÃ¡vel     â”‚ â”‚
â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Processo de NotificaÃ§Ãµes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   NOTIFICATION FLOW                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   TRIGGER   â”‚    â”‚  PROCESSOR  â”‚    â”‚     DELIVERY        â”‚ â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚                     â”‚ â”‚
â”‚  â”‚ â€¢ New Ticketâ”‚â”€â”€â”€â–ºâ”‚ â€¢ Determine â”‚â”€â”€â”€â–ºâ”‚ â€¢ Email             â”‚ â”‚
â”‚  â”‚ â€¢ Comment   â”‚    â”‚   Recipientsâ”‚    â”‚ â€¢ WebSocket         â”‚ â”‚
â”‚  â”‚ â€¢ Status    â”‚    â”‚ â€¢ Template  â”‚    â”‚ â€¢ In-App            â”‚ â”‚
â”‚  â”‚   Change    â”‚    â”‚   Selection â”‚    â”‚ â€¢ Desktop           â”‚ â”‚
â”‚  â”‚ â€¢ Assignmentâ”‚    â”‚ â€¢ Content   â”‚    â”‚                     â”‚ â”‚
â”‚  â”‚ â€¢ SLA Alert â”‚    â”‚   Generationâ”‚    â”‚                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                   â”‚                     â”‚            â”‚
â”‚         â”‚                   â”‚                     â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   RULES     â”‚    â”‚ TEMPLATES   â”‚    â”‚      TRACKING       â”‚ â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚                     â”‚ â”‚
â”‚  â”‚ â€¢ Role-basedâ”‚    â”‚ â€¢ HTML      â”‚    â”‚ â€¢ Delivery Status   â”‚ â”‚
â”‚  â”‚ â€¢ Org-based â”‚    â”‚ â€¢ Plain Textâ”‚    â”‚ â€¢ Read Receipts     â”‚ â”‚
â”‚  â”‚ â€¢ Preferenceâ”‚    â”‚ â€¢ Multi-langâ”‚    â”‚ â€¢ Error Handling    â”‚ â”‚
â”‚  â”‚ â€¢ Frequency â”‚    â”‚ â€¢ Dynamic   â”‚    â”‚ â€¢ Retry Logic       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Infraestrutura e Deploy {#infraestrutura}

### Arquitetura de Deploy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DEPLOYMENT ARCHITECTURE                    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    PRODUCTION TIER                         â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚Load Balancerâ”‚  â”‚   Nginx     â”‚  â”‚      SSL/TLS        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ HAProxy   â”‚  â”‚ â€¢ Reverse   â”‚  â”‚ â€¢ Let's Encrypt     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Round     â”‚  â”‚   Proxy     â”‚  â”‚ â€¢ Auto Renewal      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Robin     â”‚  â”‚ â€¢ Static    â”‚  â”‚ â€¢ HTTPS Redirect    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Health    â”‚  â”‚   Files     â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Check     â”‚  â”‚ â€¢ Gzip      â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   APPLICATION TIER                         â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Backend API â”‚  â”‚Portal Org   â”‚  â”‚   Portal Client     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Node.js   â”‚  â”‚ â€¢ React     â”‚  â”‚ â€¢ React             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ PM2       â”‚  â”‚ â€¢ Nginx     â”‚  â”‚ â€¢ Nginx             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Cluster   â”‚  â”‚ â€¢ Static    â”‚  â”‚ â€¢ Static            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Auto      â”‚  â”‚ â€¢ CDN       â”‚  â”‚ â€¢ CDN               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Restart   â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     DATA TIER                              â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ PostgreSQL  â”‚  â”‚  MongoDB    â”‚  â”‚       Redis         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Master/   â”‚  â”‚ â€¢ Replica   â”‚  â”‚ â€¢ Cluster           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚   Slave     â”‚  â”‚   Set       â”‚  â”‚ â€¢ Persistence       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Backup    â”‚  â”‚ â€¢ Sharding  â”‚  â”‚ â€¢ High Availability â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ WAL       â”‚  â”‚ â€¢ Backup    â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   MONITORING TIER                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Prometheus  â”‚  â”‚   Grafana   â”‚  â”‚      Alerting       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Metrics   â”‚  â”‚ â€¢ Dashboard â”‚  â”‚ â€¢ Email             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Alerts    â”‚  â”‚ â€¢ Graphs    â”‚  â”‚ â€¢ Slack             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Retention â”‚  â”‚ â€¢ Reports   â”‚  â”‚ â€¢ PagerDuty         â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Docker Compose - Desenvolvimento

```yaml
# Estrutura do docker-compose.yml atual

version: '3.8'

services:
  # Base de Dados
  postgres:     # PostgreSQL 15 - Dados principais
  mongodb:      # MongoDB 7 - Logs e auditoria  
  redis:        # Redis 7 - Cache e sessÃµes

  # AplicaÃ§Ãµes
  backend:      # Node.js API - Port 3000
  portal-org:   # React Portal Org - Port 8080
  portal-client: # React Portal Client - Port 8081

volumes:
  postgres_data:
  mongodb_data:
  redis_data:

networks:
  tatuticket-network:
```

### CI/CD Pipeline (Planeado)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CI/CD PIPELINE                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   SOURCE    â”‚    â”‚    BUILD    â”‚    â”‚        TEST         â”‚ â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚                     â”‚ â”‚
â”‚  â”‚ â€¢ Git Push  â”‚â”€â”€â”€â–ºâ”‚ â€¢ npm ci    â”‚â”€â”€â”€â–ºâ”‚ â€¢ Unit Tests        â”‚ â”‚
â”‚  â”‚ â€¢ PR Create â”‚    â”‚ â€¢ Docker    â”‚    â”‚ â€¢ Integration       â”‚ â”‚
â”‚  â”‚ â€¢ Tag       â”‚    â”‚   Build     â”‚    â”‚ â€¢ E2E Tests         â”‚ â”‚
â”‚  â”‚             â”‚    â”‚ â€¢ Lint      â”‚    â”‚ â€¢ Security Scan     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                  â”‚              â”‚
â”‚                                                  â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   DEPLOY    â”‚    â”‚   STAGING   â”‚    â”‚     PRODUCTION      â”‚ â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚                     â”‚ â”‚
â”‚  â”‚ â€¢ Registry  â”‚â—„â”€â”€â”€â”‚ â€¢ Auto      â”‚â—„â”€â”€â”€â”‚ â€¢ Manual Approval   â”‚ â”‚
â”‚  â”‚   Push      â”‚    â”‚   Deploy    â”‚    â”‚ â€¢ Blue/Green        â”‚ â”‚
â”‚  â”‚ â€¢ Helm      â”‚    â”‚ â€¢ Smoke     â”‚    â”‚ â€¢ Health Check      â”‚ â”‚
â”‚  â”‚   Charts    â”‚    â”‚   Tests     â”‚    â”‚ â€¢ Rollback Ready    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Resumo dos Diagramas

Este documento apresenta a arquitetura completa do sistema TatuTicket atravÃ©s de diagramas detalhados que cobrem:

1. **Arquitetura Geral** - VisÃ£o macro do ecossistema
2. **Componentes** - Estrutura interna de cada camada
3. **Fluxo de Dados** - Como a informaÃ§Ã£o circula
4. **Modelo de BD** - Estrutura das bases de dados
5. **SeguranÃ§a** - Camadas de proteÃ§Ã£o implementadas
6. **Processos** - Fluxos de trabalho principais
7. **Infraestrutura** - Arquitetura de deploy e CI/CD

Estes diagramas servem como referÃªncia tÃ©cnica para:
- **Desenvolvimento** - Compreender a estrutura do cÃ³digo
- **Deploy** - Configurar ambientes de produÃ§Ã£o
- **ManutenÃ§Ã£o** - Identificar componentes e dependÃªncias
- **Escalabilidade** - Planear expansÃµes futuras
- **DocumentaÃ§Ã£o** - Onboarding de novos desenvolvedores

---

**Documento gerado em**: Outubro 2025  
**VersÃ£o**: 1.0  
**Autor**: Equipa TÃ©cnica TatuTicket