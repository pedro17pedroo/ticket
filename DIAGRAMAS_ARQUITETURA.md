# ๐๏ธ Diagramas de Arquitetura - TatuTicket

## ๐ รndice
1. [Arquitetura Geral do Sistema](#arquitetura-geral)
2. [Diagrama de Componentes](#diagrama-componentes)
3. [Fluxo de Dados](#fluxo-dados)
4. [Modelo de Base de Dados](#modelo-bd)
5. [Arquitetura de Seguranรงa](#arquitetura-seguranca)
6. [Fluxos de Processo](#fluxos-processo)
7. [Infraestrutura e Deploy](#infraestrutura)

---

## ๐ Arquitetura Geral do Sistema {#arquitetura-geral}

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                              TATUTICKET ECOSYSTEM                           โ
โ                                                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                           FRONTEND LAYER                               โ โ
โ  โ                                                                         โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ   Portal Org    โ  โ Portal Cliente  โ  โ    Desktop Agent        โ โ โ
โ  โ  โ                 โ  โ                 โ  โ                         โ โ โ
โ  โ  โ โข Dashboard     โ  โ โข Autoatendim.  โ  โ โข Inventรกrio            โ โ โ
โ  โ  โ โข Tickets       โ  โ โข Meus Tickets  โ  โ โข Acesso Remoto         โ โ โ
โ  โ  โ โข Kanban        โ  โ โข Knowledge     โ  โ โข Notificaรงรตes          โ โ โ
โ  โ  โ โข Clientes      โ  โ โข Histรณrico     โ  โ โข Sincronizaรงรฃo         โ โ โ
โ  โ  โ โข Relatรณrios    โ  โ                 โ  โ                         โ โ โ
โ  โ  โ                 โ  โ                 โ  โ                         โ โ โ
โ  โ  โ React + Vite    โ  โ React + Vite    โ  โ Electron + Node.js      โ โ โ
โ  โ  โ Port: 5173      โ  โ Port: 5174      โ  โ Desktop App             โ โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                      โ                                       โ
โ                                      โ HTTP/HTTPS + WebSocket                โ
โ                                      โ                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                            API GATEWAY LAYER                           โ โ
โ  โ                                                                         โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ โ
โ  โ  โ                    Backend API (Node.js)                       โ   โ โ
โ  โ  โ                                                                 โ   โ โ
โ  โ  โ  โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโ โ   โ โ
โ  โ  โ  โ   REST API  โ โ  WebSocket  โ โ File Upload โ โ   Auth    โ โ   โ โ
โ  โ  โ  โ             โ โ             โ โ             โ โ           โ โ   โ โ
โ  โ  โ  โ โข 32+ Endp. โ โ โข Real-time โ โ โข Multer    โ โ โข JWT     โ โ   โ โ
โ  โ  โ  โ โข Express   โ โ โข Socket.io โ โ โข Validationโ โ โข Passportโ โ   โ โ
โ  โ  โ  โ โข Joi Valid.โ โ โข Events    โ โ โข Security  โ โ โข RBAC    โ โ   โ โ
โ  โ  โ  โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโ โ   โ โ
โ  โ  โ                                                                 โ   โ โ
โ  โ  โ  โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโ โ   โ โ
โ  โ  โ  โ Middleware  โ โ   Logging   โ โ  Security   โ โ  Modules  โ โ   โ โ
โ  โ  โ  โ             โ โ             โ โ             โ โ           โ โ   โ โ
โ  โ  โ  โ โข Auth      โ โ โข Winston   โ โ โข Helmet    โ โ โข Tickets โ โ   โ โ
โ  โ  โ  โ โข Validationโ โ โข Audit     โ โ โข Rate Lim. โ โ โข Users   โ โ   โ โ
โ  โ  โ  โ โข Error     โ โ โข Monitoringโ โ โข CORS      โ โ โข Inventoryโ โ   โ โ
โ  โ  โ  โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโ โโโโโโโโโโโโโ โ   โ โ
โ  โ  โ                                                                 โ   โ โ
โ  โ  โ                        Port: 3000                              โ   โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                      โ                                       โ
โ                                      โ SQL/NoSQL/Cache                       โ
โ                                      โ                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                           DATA LAYER                                   โ โ
โ  โ                                                                         โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ   PostgreSQL    โ  โ    MongoDB      โ  โ        Redis            โ โ โ
โ  โ  โ                 โ  โ                 โ  โ                         โ โ โ
โ  โ  โ โข Dados Princ.  โ  โ โข Logs          โ  โ โข Cache                 โ โ โ
โ  โ  โ โข Tickets       โ  โ โข Auditoria     โ  โ โข Sessรตes               โ โ โ
โ  โ  โ โข Users         โ  โ โข Monitoring    โ  โ โข Rate Limiting         โ โ โ
โ  โ  โ โข Organizations โ  โ โข Analytics     โ  โ โข WebSocket Sessions    โ โ โ
โ  โ  โ โข Inventory     โ  โ                 โ  โ                         โ โ โ
โ  โ  โ                 โ  โ                 โ  โ                         โ โ โ
โ  โ  โ Port: 5432      โ  โ Port: 27017     โ  โ Port: 6379              โ โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐งฉ Diagrama de Componentes {#diagrama-componentes}

### Backend Components

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        BACKEND ARCHITECTURE                     โ
โ                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                    APPLICATION LAYER                       โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ   Routes    โ  โ Controllers โ  โ     Middleware      โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข /auth     โ  โ โข authCtrl  โ  โ โข authenticate      โ โ โ
โ  โ  โ โข /tickets  โ  โ โข ticketCtrlโ  โ โข authorize         โ โ โ
โ  โ  โ โข /users    โ  โ โข userCtrl  โ  โ โข validate          โ โ โ
โ  โ  โ โข /inventoryโ  โ โข invCtrl   โ  โ โข errorHandler      โ โ โ
โ  โ  โ โข /upload   โ  โ โข uploadCtrlโ  โ โข auditLogger       โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                    BUSINESS LAYER                          โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ  Services   โ  โ   Models    โ  โ     Validators      โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข emailSvc  โ  โ โข User      โ  โ โข authSchema        โ โ โ
โ  โ  โ โข notifSvc  โ  โ โข Ticket    โ  โ โข ticketSchema      โ โ โ
โ  โ  โ โข auditSvc  โ  โ โข Org       โ  โ โข userSchema        โ โ โ
โ  โ  โ โข socketSvc โ  โ โข Asset     โ  โ โข uploadSchema      โ โ โ
โ  โ  โ โข invSvc    โ  โ โข Comment   โ  โ                     โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                     DATA LAYER                             โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ PostgreSQL  โ  โ  MongoDB    โ  โ       Redis         โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข Sequelize โ  โ โข Mongoose  โ  โ โข ioredis           โ โ โ
โ  โ  โ โข Relations โ  โ โข Collectionsโ  โ โข Sessions          โ โ โ
โ  โ  โ โข Migrationsโ  โ โข Indexes   โ  โ โข Cache             โ โ โ
โ  โ  โ โข Seeds     โ  โ โข Aggreg.   โ  โ โข PubSub            โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Frontend Components (Portal Organizaรงรฃo)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    FRONTEND ARCHITECTURE                        โ
โ                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                    PRESENTATION LAYER                      โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ    Pages    โ  โ Components  โ  โ       Layout        โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข Dashboard โ  โ โข Header    โ  โ โข Sidebar           โ โ โ
โ  โ  โ โข Tickets   โ  โ โข Sidebar   โ  โ โข Main Content      โ โ โ
โ  โ  โ โข TicketDet โ  โ โข Modal     โ  โ โข Footer            โ โ โ
โ  โ  โ โข Kanban    โ  โ โข Form      โ  โ โข Theme Provider    โ โ โ
โ  โ  โ โข Clients   โ  โ โข Table     โ  โ                     โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                    BUSINESS LAYER                          โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ   Stores    โ  โ  Services   โ  โ      Contexts       โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข authStore โ  โ โข api.js    โ  โ โข SocketContext     โ โ โ
โ  โ  โ โข themeStoreโ  โ โข invSvc    โ  โ โข NotifContext      โ โ โ
โ  โ  โ โข userStore โ  โ โข exportSvc โ  โ โข ThemeContext      โ โ โ
โ  โ  โ             โ  โ โข socketSvc โ  โ                     โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                     UTILS LAYER                            โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ    Utils    โ  โ   Hooks     โ  โ      Constants      โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข alerts    โ  โ โข useAuth   โ  โ โข API_ENDPOINTS     โ โ โ
โ  โ  โ โข export    โ  โ โข useSocket โ  โ โข ROLES             โ โ โ
โ  โ  โ โข format    โ  โ โข useNotif  โ  โ โข STATUS            โ โ โ
โ  โ  โ โข inventory โ  โ โข useTheme  โ  โ โข PRIORITIES        โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Fluxo de Dados {#fluxo-dados}

### Fluxo de Autenticaรงรฃo

```
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ   Cliente   โ    โ  Frontend   โ    โ   Backend   โ    โ Base Dados  โ
โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ
       โ                  โ                  โ                  โ
       โ 1. Login Form    โ                  โ                  โ
       โโโโโโโโโโโโโโโโโโโบโ                  โ                  โ
       โ                  โ 2. POST /auth/   โ                  โ
       โ                  โ    login         โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโบโ                  โ
       โ                  โ                  โ 3. Validate      โ
       โ                  โ                  โ    Credentials   โ
       โ                  โ                  โโโโโโโโโโโโโโโโโโโบโ
       โ                  โ                  โ 4. User Data     โ
       โ                  โ                  โโโโโโโโโโโโโโโโโโโโค
       โ                  โ 5. JWT Token +   โ                  โ
       โ                  โ    User Data     โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโโค                  โ
       โ 6. Store Token   โ                  โ                  โ
       โ    & Redirect    โ                  โ                  โ
       โโโโโโโโโโโโโโโโโโโโค                  โ                  โ
       โ                  โ 7. WebSocket     โ                  โ
       โ                  โ    Connect       โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโบโ                  โ
       โ                  โ 8. Real-time     โ                  โ
       โ                  โ    Connection    โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโโค                  โ
```

### Fluxo de Criaรงรฃo de Ticket

```
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ   Cliente   โ    โ  Frontend   โ    โ   Backend   โ    โ Base Dados  โ    โ   Email     โ
โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ
       โ                  โ                  โ                  โ                  โ
       โ 1. New Ticket    โ                  โ                  โ                  โ
       โ    Form          โ                  โ                  โ                  โ
       โโโโโโโโโโโโโโโโโโโบโ                  โ                  โ                  โ
       โ                  โ 2. POST /tickets โ                  โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโบโ                  โ                  โ
       โ                  โ                  โ 3. Validate      โ                  โ
       โ                  โ                  โ    Data          โ                  โ
       โ                  โ                  โ                  โ                  โ
       โ                  โ                  โ 4. Save Ticket   โ                  โ
       โ                  โ                  โโโโโโโโโโโโโโโโโโโบโ                  โ
       โ                  โ                  โ 5. Auto-assign   โ                  โ
       โ                  โ                  โ    Agent         โ                  โ
       โ                  โ                  โโโโโโโโโโโโโโโโโโโบโ                  โ
       โ                  โ                  โ 6. Create Audit  โ                  โ
       โ                  โ                  โ    Log           โ                  โ
       โ                  โ                  โโโโโโโโโโโโโโโโโโโบโ                  โ
       โ                  โ 7. Ticket Data   โ                  โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโโค                  โ                  โ
       โ 8. Success       โ                  โ                  โ                  โ
       โ    Message       โ                  โ                  โ                  โ
       โโโโโโโโโโโโโโโโโโโโค                  โ                  โ                  โ
       โ                  โ                  โ 9. Send Email    โ                  โ
       โ                  โ                  โ    Notification  โ                  โ
       โ                  โ                  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโบโ
       โ                  โ                  โ 10. WebSocket    โ                  โ
       โ                  โ                  โ     Broadcast    โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโโค                  โ                  โ
       โ 11. Real-time    โ                  โ                  โ                  โ
       โ     Update       โ                  โ                  โ                  โ
       โโโโโโโโโโโโโโโโโโโโค                  โ                  โ                  โ
```

### Fluxo de Inventรกrio (Desktop Agent)

```
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โDesktop Agentโ    โ   Backend   โ    โ Base Dados  โ    โ  Dashboard  โ
โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ
       โ                  โ                  โ                  โ
       โ 1. Start Agent   โ                  โ                  โ
       โ                  โ                  โ                  โ
       โ 2. WebSocket     โ                  โ                  โ
       โ    Connect       โ                  โ                  โ
       โโโโโโโโโโโโโโโโโโโบโ                  โ                  โ
       โ 3. Authenticate  โ                  โ                  โ
       โ    with Token    โ                  โ                  โ
       โโโโโโโโโโโโโโโโโโโบโ                  โ                  โ
       โ                  โ                  โ                  โ
       โ 4. Collect       โ                  โ                  โ
       โ    System Info   โ                  โ                  โ
       โ                  โ                  โ                  โ
       โ 5. POST /assets  โ                  โ                  โ
       โ    inventory     โ                  โ                  โ
       โโโโโโโโโโโโโโโโโโโบโ                  โ                  โ
       โ                  โ 6. Save/Update   โ                  โ
       โ                  โ    Asset Data    โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโบโ                  โ
       โ                  โ 7. Broadcast     โ                  โ
       โ                  โ    Update        โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโบโ
       โ 8. Schedule      โ                  โ                  โ
       โ    Next Sync     โ                  โ                  โ
       โ                  โ                  โ                  โ
       โ ... (repeat every 30 min) ...       โ                  โ
```

---

## ๐๏ธ Modelo de Base de Dados {#modelo-bd}

### PostgreSQL - Dados Principais

```sql
-- Diagrama Entidade-Relacionamento Simplificado

โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
โ  Organizations  โ     โ      Users      โ     โ   Departments   โ
โโโโโโโโโโโโโโโโโโโค     โโโโโโโโโโโโโโโโโโโค     โโโโโโโโโโโโโโโโโโโค
โ id (UUID) PK    โโโโโโบโ organizationId  โ     โ id (UUID) PK    โ
โ name            โ     โ id (UUID) PK    โ     โ organizationId  โ
โ slug            โ     โ name            โ     โ name            โ
โ logo            โ     โ email           โ     โ description     โ
โ primaryColor    โ     โ password        โ     โ isActive        โ
โ secondaryColor  โ     โ role            โ     โโโโโโโโโโโโโโโโโโโ
โ settings        โ     โ isActive        โ              โ
โ createdAt       โ     โ lastLogin       โ              โ
โ updatedAt       โ     โ createdAt       โ              โ
โโโโโโโโโโโโโโโโโโโ     โ updatedAt       โ              โ
                        โโโโโโโโโโโโโโโโโโโ              โ
                                 โ                       โ
                                 โ                       โ
โโโโโโโโโโโโโโโโโโโ              โ              โโโโโโโโโโโโโโโโโโโ
โ   Categories    โ              โ              โ     Tickets     โ
โโโโโโโโโโโโโโโโโโโค              โ              โโโโโโโโโโโโโโโโโโโค
โ id (UUID) PK    โ              โ              โ id (UUID) PK    โ
โ organizationId  โ              โ              โ organizationId  โ
โ departmentId    โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโค departmentId    โ
โ name            โ              โ              โ categoryId      โ
โ description     โ              โ              โ requesterId     โโโโโ
โ color           โ              โ              โ assigneeId      โโโโโค
โ isActive        โ              โ              โ subject         โ   โ
โโโโโโโโโโโโโโโโโโโ              โ              โ description     โ   โ
                                 โ              โ status          โ   โ
โโโโโโโโโโโโโโโโโโโ              โ              โ priority        โ   โ
โ      SLAs       โ              โ              โ createdAt       โ   โ
โโโโโโโโโโโโโโโโโโโค              โ              โ updatedAt       โ   โ
โ id (UUID) PK    โ              โ              โ resolvedAt      โ   โ
โ organizationId  โ              โ              โ closedAt        โ   โ
โ name            โ              โ              โโโโโโโโโโโโโโโโโโโ   โ
โ responseTime    โ              โ                       โ            โ
โ resolutionTime  โ              โ                       โ            โ
โ isActive        โ              โ                       โ            โ
โโโโโโโโโโโโโโโโโโโ              โ                       โ            โ
                                 โ                       โ            โ
โโโโโโโโโโโโโโโโโโโ              โ              โโโโโโโโโโโโโโโโโโโ   โ
โ    Comments     โ              โ              โ   Attachments   โ   โ
โโโโโโโโโโโโโโโโโโโค              โ              โโโโโโโโโโโโโโโโโโโค   โ
โ id (UUID) PK    โ              โ              โ id (UUID) PK    โ   โ
โ ticketId        โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโค ticketId        โ   โ
โ userId          โโโโโโโโโโโโโโโโ              โ filename        โ   โ
โ message         โ                             โ originalName    โ   โ
โ isInternal      โ                             โ mimeType        โ   โ
โ createdAt       โ                             โ size            โ   โ
โ updatedAt       โ                             โ path            โ   โ
โโโโโโโโโโโโโโโโโโโ                             โ uploadedBy      โโโโโ
                                                โ createdAt       โ
                                                โโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
โ   HoursBank     โ     โHoursTransaction โ     โ     Assets      โ
โโโโโโโโโโโโโโโโโโโค     โโโโโโโโโโโโโโโโโโโค     โโโโโโโโโโโโโโโโโโโค
โ id (UUID) PK    โโโโโโบโ hoursBankId     โ     โ id (UUID) PK    โ
โ organizationId  โ     โ id (UUID) PK    โ     โ organizationId  โ
โ name            โ     โ type            โ     โ name            โ
โ description     โ     โ hours           โ     โ type            โ
โ totalHours      โ     โ description     โ     โ serialNumber    โ
โ usedHours       โ     โ userId          โ     โ manufacturer    โ
โ isActive        โ     โ createdAt       โ     โ model           โ
โ createdAt       โ     โโโโโโโโโโโโโโโโโโโ     โ location        โ
โ updatedAt       โ                             โ status          โ
โโโโโโโโโโโโโโโโโโโ                             โ lastSeen        โ
                                                โ agentId         โ
                                                โ specifications  โ
                                                โ createdAt       โ
                                                โ updatedAt       โ
                                                โโโโโโโโโโโโโโโโโโโ
```

### MongoDB - Logs e Auditoria

```javascript
// Collection: audit_logs
{
  _id: ObjectId("..."),
  userId: "uuid-user-id",
  organizationId: "uuid-org-id",
  action: "CREATE|UPDATE|DELETE|LOGIN|LOGOUT",
  resource: "ticket|user|comment|attachment",
  resourceId: "uuid-resource-id",
  changes: {
    before: { ... },  // Estado anterior
    after: { ... }    // Estado novo
  },
  metadata: {
    ipAddress: "192.168.1.100",
    userAgent: "Mozilla/5.0...",
    sessionId: "session-uuid"
  },
  timestamp: ISODate("2025-10-26T10:30:00Z")
}

// Collection: system_logs
{
  _id: ObjectId("..."),
  level: "info|warn|error|debug",
  message: "Log message",
  service: "api|socket|email|inventory",
  module: "auth|tickets|users",
  data: { ... },
  timestamp: ISODate("2025-10-26T10:30:00Z")
}

// Collection: performance_metrics
{
  _id: ObjectId("..."),
  endpoint: "/api/tickets",
  method: "GET|POST|PUT|DELETE",
  responseTime: 150,  // milliseconds
  statusCode: 200,
  userId: "uuid-user-id",
  timestamp: ISODate("2025-10-26T10:30:00Z")
}
```

### Redis - Cache e Sessรตes

```
// Estrutura de Chaves Redis

// Sessรตes de usuรกrio
user:session:{userId} โ {
  token: "jwt-token",
  lastActivity: timestamp,
  ipAddress: "192.168.1.100"
}

// Cache de dados
cache:tickets:{orgId}:{filters} โ JSON array
cache:users:{orgId} โ JSON array
cache:stats:{orgId}:{period} โ JSON object

// Rate limiting
rate_limit:{ip}:{endpoint} โ counter (TTL: 15min)

// WebSocket sessions
socket:user:{userId} โ socket_id
socket:org:{orgId} โ [socket_ids]

// Temporary data
temp:upload:{uploadId} โ file_metadata (TTL: 1h)
temp:reset:{token} โ user_id (TTL: 30min)
```

---

## ๐ Arquitetura de Seguranรงa {#arquitetura-seguranca}

### Camadas de Seguranรงa

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        SECURITY LAYERS                          โ
โ                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                    NETWORK LAYER                           โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ   Firewall  โ  โ    HTTPS    โ  โ      CORS           โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข Port      โ  โ โข TLS 1.3   โ  โ โข Origin Control    โ โ โ
โ  โ  โ   Filtering โ  โ โข Cert      โ  โ โข Method Control    โ โ โ
โ  โ  โ โข IP        โ  โ   Validationโ  โ โข Header Control    โ โ โ
โ  โ  โ   Whitelist โ  โ โข HSTS      โ  โ                     โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                 APPLICATION LAYER                          โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ   Helmet    โ  โRate Limitingโ  โ   Input Validation  โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข XSS       โ  โ โข 100 req/  โ  โ โข Joi Schemas       โ โ โ
โ  โ  โ   Protectionโ  โ   15min     โ  โ โข SQL Injection     โ โ โ
โ  โ  โ โข CSRF      โ  โ โข Per IP    โ  โ โข XSS Prevention    โ โ โ
โ  โ  โ โข Clickjack โ  โ โข Per User  โ  โ โข File Upload       โ โ โ
โ  โ  โ โข MIME Sniffโ  โ             โ  โ   Validation        โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                AUTHENTICATION LAYER                        โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ     JWT     โ  โ   Passport  โ  โ       RBAC          โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข HS256     โ  โ โข Local     โ  โ โข admin-org         โ โ โ
โ  โ  โ โข 24h TTL   โ  โ   Strategy  โ  โ โข agente            โ โ โ
โ  โ  โ โข Refresh   โ  โ โข JWT       โ  โ โข cliente-org       โ โ โ
โ  โ  โ   Token     โ  โ   Strategy  โ  โ โข Resource Access   โ โ โ
โ  โ  โ โข Blacklist โ  โ             โ  โ โข Organization      โ โ โ
โ  โ  โ             โ  โ             โ  โ   Isolation         โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                     DATA LAYER                             โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ  Encryption โ  โ   Hashing   โ  โ      Audit          โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข Bcrypt    โ  โ โข Passwords โ  โ โข All Actions       โ โ โ
โ  โ  โ   (12 salt) โ  โ โข Sensitive โ  โ โข IP Tracking       โ โ โ
โ  โ  โ โข File      โ  โ   Data      โ  โ โข Change History    โ โ โ
โ  โ  โ   Encryptionโ  โ โข SHA-256   โ  โ โข Compliance        โ โ โ
โ  โ  โ โข DB        โ  โ             โ  โ                     โ โ โ
โ  โ  โ   Encryptionโ  โ             โ  โ                     โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Fluxo de Autorizaรงรฃo

```
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ   Request   โ    โ    Auth     โ    โ    RBAC     โ    โ  Resource   โ
โ             โ    โ Middleware  โ    โ  Middleware โ    โ   Access    โ
โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ    โโโโโโโโฌโโโโโโโ
       โ                  โ                  โ                  โ
       โ 1. HTTP Request  โ                  โ                  โ
       โ    with Token    โ                  โ                  โ
       โโโโโโโโโโโโโโโโโโโบโ                  โ                  โ
       โ                  โ 2. Validate JWT  โ                  โ
       โ                  โ    Token         โ                  โ
       โ                  โ                  โ                  โ
       โ                  โ 3. Extract User  โ                  โ
       โ                  โ    & Role        โ                  โ
       โ                  โ                  โ                  โ
       โ                  โ 4. Check Role    โ                  โ
       โ                  โ    Permissions   โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโบโ                  โ
       โ                  โ                  โ 5. Validate      โ
       โ                  โ                  โ    Resource      โ
       โ                  โ                  โ    Access        โ
       โ                  โ                  โ                  โ
       โ                  โ                  โ 6. Check Org     โ
       โ                  โ                  โ    Isolation     โ
       โ                  โ                  โ                  โ
       โ                  โ 7. Access        โ                  โ
       โ                  โ    Granted       โ                  โ
       โ                  โโโโโโโโโโโโโโโโโโโโค                  โ
       โ 8. Proceed to    โ                  โ                  โ
       โ    Controller    โ                  โ                  โ
       โโโโโโโโโโโโโโโโโโโโค                  โ                  โ
       โ                  โ                  โ                  โ
       โ                  โ                  โ 9. Log Access    โ
       โ                  โ                  โ    Attempt       โ
       โ                  โ                  โโโโโโโโโโโโโโโโโโโบโ
```

---

## ๐ Fluxos de Processo {#fluxos-processo}

### Processo de Gestรฃo de Tickets

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    TICKET LIFECYCLE                             โ
โ                                                                 โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ    NOVO     โโโโโบโ EM PROGRESSOโโโโโบโ   AGUARDANDO        โ โ
โ  โ             โ    โ             โ    โ    CLIENTE          โ โ
โ  โ โข Criado    โ    โ โข Atribuรญdo โ    โ                     โ โ
โ  โ โข Validado  โ    โ โข Em anรกliseโ    โ โข Info adicional    โ โ
โ  โ โข Atribuรญdo โ    โ โข Trabalhandoโ    โ โข Aprovaรงรฃo         โ โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โ โข Teste             โ โ
โ         โ                   โ          โโโโโโโโโโโโโโโโโโโโโโโ โ
โ         โ                   โ                     โ            โ
โ         โ                   โ                     โ            โ
โ         โ                   โ          โโโโโโโโโโโโโโโโโโโโโโโ โ
โ         โ                   โ          โ     RESOLVIDO       โ โ
โ         โ                   โ          โ                     โ โ
โ         โ                   โโโโโโโโโโโบโ โข Soluรงรฃo impl.     โ โ
โ         โ                              โ โข Aguarda confirm.  โ โ
โ         โ                              โ โข Teste realizado   โ โ
โ         โ                              โโโโโโโโโโโโโโโโโโโโโโโ โ
โ         โ                                         โ            โ
โ         โ                                         โ            โ
โ         โ                              โโโโโโโโโโโโโโโโโโโโโโโ โ
โ         โ                              โ      FECHADO        โ โ
โ         โ                              โ                     โ โ
โ         โ                              โ โข Confirmado        โ โ
โ         โ                              โ โข Satisfaรงรฃo        โ โ
โ         โ                              โ โข Arquivado         โ โ
โ         โ                              โโโโโโโโโโโโโโโโโโโโโโโ โ
โ         โ                                                      โ
โ         โ                              โโโโโโโโโโโโโโโโโโโโโโโ โ
โ         โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโบโ    CANCELADO        โ โ
โ                                        โ                     โ โ
โ                                        โ โข Duplicado         โ โ
โ                                        โ โข Invรกlido          โ โ
โ                                        โ โข Nรฃo aplicรกvel     โ โ
โ                                        โโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Processo de Notificaรงรตes

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   NOTIFICATION FLOW                             โ
โ                                                                 โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ   TRIGGER   โ    โ  PROCESSOR  โ    โ     DELIVERY        โ โ
โ  โ             โ    โ             โ    โ                     โ โ
โ  โ โข New Ticketโโโโโบโ โข Determine โโโโโบโ โข Email             โ โ
โ  โ โข Comment   โ    โ   Recipientsโ    โ โข WebSocket         โ โ
โ  โ โข Status    โ    โ โข Template  โ    โ โข In-App            โ โ
โ  โ   Change    โ    โ   Selection โ    โ โข Desktop           โ โ
โ  โ โข Assignmentโ    โ โข Content   โ    โ                     โ โ
โ  โ โข SLA Alert โ    โ   Generationโ    โ                     โ โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ โ
โ         โ                   โ                     โ            โ
โ         โ                   โ                     โ            โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ   RULES     โ    โ TEMPLATES   โ    โ      TRACKING       โ โ
โ  โ             โ    โ             โ    โ                     โ โ
โ  โ โข Role-basedโ    โ โข HTML      โ    โ โข Delivery Status   โ โ
โ  โ โข Org-based โ    โ โข Plain Textโ    โ โข Read Receipts     โ โ
โ  โ โข Preferenceโ    โ โข Multi-langโ    โ โข Error Handling    โ โ
โ  โ โข Frequency โ    โ โข Dynamic   โ    โ โข Retry Logic       โ โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Infraestrutura e Deploy {#infraestrutura}

### Arquitetura de Deploy

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      DEPLOYMENT ARCHITECTURE                    โ
โ                                                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                    PRODUCTION TIER                         โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โLoad Balancerโ  โ   Nginx     โ  โ      SSL/TLS        โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข HAProxy   โ  โ โข Reverse   โ  โ โข Let's Encrypt     โ โ โ
โ  โ  โ โข Round     โ  โ   Proxy     โ  โ โข Auto Renewal      โ โ โ
โ  โ  โ   Robin     โ  โ โข Static    โ  โ โข HTTPS Redirect    โ โ โ
โ  โ  โ โข Health    โ  โ   Files     โ  โ                     โ โ โ
โ  โ  โ   Check     โ  โ โข Gzip      โ  โ                     โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                   APPLICATION TIER                         โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ Backend API โ  โPortal Org   โ  โ   Portal Client     โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข Node.js   โ  โ โข React     โ  โ โข React             โ โ โ
โ  โ  โ โข PM2       โ  โ โข Nginx     โ  โ โข Nginx             โ โ โ
โ  โ  โ โข Cluster   โ  โ โข Static    โ  โ โข Static            โ โ โ
โ  โ  โ โข Auto      โ  โ โข CDN       โ  โ โข CDN               โ โ โ
โ  โ  โ   Restart   โ  โ             โ  โ                     โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                     DATA TIER                              โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ PostgreSQL  โ  โ  MongoDB    โ  โ       Redis         โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข Master/   โ  โ โข Replica   โ  โ โข Cluster           โ โ โ
โ  โ  โ   Slave     โ  โ   Set       โ  โ โข Persistence       โ โ โ
โ  โ  โ โข Backup    โ  โ โข Sharding  โ  โ โข High Availability โ โ โ
โ  โ  โ โข WAL       โ  โ โข Backup    โ  โ                     โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                   MONITORING TIER                          โ โ
โ  โ                                                             โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ Prometheus  โ  โ   Grafana   โ  โ      Alerting       โ โ โ
โ  โ  โ             โ  โ             โ  โ                     โ โ โ
โ  โ  โ โข Metrics   โ  โ โข Dashboard โ  โ โข Email             โ โ โ
โ  โ  โ โข Alerts    โ  โ โข Graphs    โ  โ โข Slack             โ โ โ
โ  โ  โ โข Retention โ  โ โข Reports   โ  โ โข PagerDuty         โ โ โ
โ  โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Docker Compose - Desenvolvimento

```yaml
# Estrutura do docker-compose.yml atual

version: '3.8'

services:
  # Base de Dados
  postgres:     # PostgreSQL 15 - Dados principais
  mongodb:      # MongoDB 7 - Logs e auditoria  
  redis:        # Redis 7 - Cache e sessรตes

  # Aplicaรงรตes
  backend:      # Node.js API - Port 3000
  portal-org:   # React Portal Org - Port 8080
  portal-client: # React Portal Client - Port 8081

volumes:
  postgres_data:
  mongodb_data:
  redis_data:

networks:
  tatuticket-network:
```

### CI/CD Pipeline (Planeado)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        CI/CD PIPELINE                           โ
โ                                                                 โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ   SOURCE    โ    โ    BUILD    โ    โ        TEST         โ โ
โ  โ             โ    โ             โ    โ                     โ โ
โ  โ โข Git Push  โโโโโบโ โข npm ci    โโโโโบโ โข Unit Tests        โ โ
โ  โ โข PR Create โ    โ โข Docker    โ    โ โข Integration       โ โ
โ  โ โข Tag       โ    โ   Build     โ    โ โข E2E Tests         โ โ
โ  โ             โ    โ โข Lint      โ    โ โข Security Scan     โ โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                                  โ              โ
โ                                                  โ              โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ   DEPLOY    โ    โ   STAGING   โ    โ     PRODUCTION      โ โ
โ  โ             โ    โ             โ    โ                     โ โ
โ  โ โข Registry  โโโโโโ โข Auto      โโโโโโ โข Manual Approval   โ โ
โ  โ   Push      โ    โ   Deploy    โ    โ โข Blue/Green        โ โ
โ  โ โข Helm      โ    โ โข Smoke     โ    โ โข Health Check      โ โ
โ  โ   Charts    โ    โ   Tests     โ    โ โข Rollback Ready    โ โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Resumo dos Diagramas

Este documento apresenta a arquitetura completa do sistema TatuTicket atravรฉs de diagramas detalhados que cobrem:

1. **Arquitetura Geral** - Visรฃo macro do ecossistema
2. **Componentes** - Estrutura interna de cada camada
3. **Fluxo de Dados** - Como a informaรงรฃo circula
4. **Modelo de BD** - Estrutura das bases de dados
5. **Seguranรงa** - Camadas de proteรงรฃo implementadas
6. **Processos** - Fluxos de trabalho principais
7. **Infraestrutura** - Arquitetura de deploy e CI/CD

Estes diagramas servem como referรชncia tรฉcnica para:
- **Desenvolvimento** - Compreender a estrutura do cรณdigo
- **Deploy** - Configurar ambientes de produรงรฃo
- **Manutenรงรฃo** - Identificar componentes e dependรชncias
- **Escalabilidade** - Planear expansรตes futuras
- **Documentaรงรฃo** - Onboarding de novos desenvolvedores

---

**Documento gerado em**: Outubro 2025  
**Versรฃo**: 1.0  
**Autor**: Equipa Tรฉcnica TatuTicket